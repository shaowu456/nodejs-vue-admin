(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04f5ef44"],{"0d03":function(e,t,l){var a=l("6eeb"),i=Date.prototype,n="Invalid Date",o="toString",s=i[o],r=i.getTime;new Date(NaN)+""!=n&&a(i,o,(function(){var e=r.call(this);return e===e?s.call(this):n}))},1276:function(e,t,l){"use strict";var a=l("d784"),i=l("44e7"),n=l("825a"),o=l("1d80"),s=l("4840"),r=l("8aa5"),c=l("50c4"),u=l("14c3"),d=l("9263"),p=l("d039"),m=[].push,b=Math.min,v=4294967295,f=!p((function(){return!RegExp(v,"y")}));a("split",2,(function(e,t,l){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,l){var a=String(o(this)),n=void 0===l?v:l>>>0;if(0===n)return[];if(void 0===e)return[a];if(!i(e))return t.call(a,e,n);var s,r,c,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,f=new RegExp(e.source,p+"g");while(s=d.call(f,a)){if(r=f.lastIndex,r>b&&(u.push(a.slice(b,s.index)),s.length>1&&s.index<a.length&&m.apply(u,s.slice(1)),c=s[0].length,b=r,u.length>=n))break;f.lastIndex===s.index&&f.lastIndex++}return b===a.length?!c&&f.test("")||u.push(""):u.push(a.slice(b)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,l){return void 0===e&&0===l?[]:t.call(this,e,l)}:t,[function(t,l){var i=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,i,l):a.call(String(i),t,l)},function(e,i){var o=l(a,e,this,i,a!==t);if(o.done)return o.value;var d=n(e),p=String(this),m=s(d,RegExp),h=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),k=new m(f?d:"^(?:"+d.source+")",y),x=void 0===i?v:i>>>0;if(0===x)return[];if(0===p.length)return null===u(k,p)?[p]:[];var _=0,$=0,g=[];while($<p.length){k.lastIndex=f?$:0;var O,D=u(k,f?p:p.slice($));if(null===D||(O=b(c(k.lastIndex+(f?0:$)),p.length))===_)$=r(p,$,h);else{if(g.push(p.slice(_,$)),g.length===x)return g;for(var j=1;j<=D.length-1;j++)if(g.push(D[j]),g.length===x)return g;$=_=O}}return g.push(p.slice(_)),g}]}),!f)},"2c6ce":function(e,t,l){"use strict";var a=l("e6e1"),i=l.n(a);i.a},"40f0":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"about"},[l("h1",{staticStyle:{margin:"0"}},[e._v(e._s(e.id?"编辑":"新建")+"客户")]),l("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[l("el-tabs",{attrs:{value:"skills",type:"border-card"}},[l("el-tab-pane",{attrs:{name:"bases",label:"基础信息"}},[l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),l("el-form-item",{attrs:{label:"电话"}},[l("el-input",{model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),l("el-form-item",{attrs:{label:"性别"}},[l("el-select",{model:{value:e.model.sex,callback:function(t){e.$set(e.model,"sex",t)},expression:"model.sex"}},e._l(e.categories,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"出生日期"}},[l("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},model:{value:e.model.birthday,callback:function(t){e.$set(e.model,"birthday",t)},expression:"model.birthday"}})],1),l("el-form-item",{attrs:{label:"年龄"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.model.age,callback:function(t){e.$set(e.model,"age",t)},expression:"model.age"}})],1),l("el-form-item",{attrs:{label:"地址"}},[l("el-input",{model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1),l("el-tab-pane",{attrs:{name:"skills",label:"详情"}},[l("el-button",{attrs:{size:"small"},on:{click:function(t){e.model.skills.push({createDate:new Date})}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")]),l("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(t,a){return l("el-col",{key:a,attrs:{md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"item.name"}})],1),l("el-form-item",{attrs:{label:"创建日期"}},[l("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},model:{value:t.createDate,callback:function(l){e.$set(t,"createDate",l)},expression:"item.createDate"}})],1),l("el-form-item",{attrs:{label:"图标"}},[l("Up-Loadimgs",{attrs:{PfileList:t.iconLists,fakePfileList:t.fakeIconLists},on:{"update:PfileList":function(l){return e.$set(t,"iconLists",l)},"update:pfile-list":function(l){return e.$set(t,"iconLists",l)},"update:fakePfileList":function(l){return e.$set(t,"fakeIconLists",l)},"update:fake-pfile-list":function(l){return e.$set(t,"fakeIconLists",l)}}})],1),l("div",{staticClass:"free_ipt_box"},[l("span",{staticClass:"free_title"},[e._v("电脑验光")]),l("ul",[l("li"),l("li",[e._v("球镜")]),l("li",[e._v("柱镜")]),l("li",[e._v("轴向")])]),l("ul",[l("li",[e._v("OD")]),l("li",[l("el-input",{model:{value:t.pcODqj,callback:function(l){e.$set(t,"pcODqj",l)},expression:"item.pcODqj"}})],1),l("li",[l("el-input",{model:{value:t.pcODzj,callback:function(l){e.$set(t,"pcODzj",l)},expression:"item.pcODzj"}})],1),l("li",[l("el-input",{model:{value:t.pcODzx,callback:function(l){e.$set(t,"pcODzx",l)},expression:"item.pcODzx"}})],1)]),l("ul",[l("li",[e._v("OS")]),l("li",[l("el-input",{model:{value:t.pcOSqj,callback:function(l){e.$set(t,"pcOSqj",l)},expression:"item.pcOSqj"}})],1),l("li",[l("el-input",{model:{value:t.pcOSzj,callback:function(l){e.$set(t,"pcOSzj",l)},expression:"item.pcOSzj"}})],1),l("li",[l("el-input",{model:{value:t.pcOSzx,callback:function(l){e.$set(t,"pcOSzx",l)},expression:"item.pcOSzx"}})],1)])]),l("div",{staticClass:"free_ipt_box"},[l("span",{staticClass:"free_title"},[e._v("主观验光")]),l("ul",[l("li"),l("li",[e._v("球镜")]),l("li",[e._v("柱镜")]),l("li",[e._v("轴向")]),l("li",[e._v("瞳距")]),l("li",[e._v("ADD")])]),l("ul",[l("li",[e._v("OD")]),l("li",[l("el-input",{model:{value:t.obODqj,callback:function(l){e.$set(t,"obODqj",l)},expression:"item.obODqj"}})],1),l("li",[l("el-input",{model:{value:t.obODzj,callback:function(l){e.$set(t,"obODzj",l)},expression:"item.obODzj"}})],1),l("li",[l("el-input",{model:{value:t.obODzx,callback:function(l){e.$set(t,"obODzx",l)},expression:"item.obODzx"}})],1),l("li",[l("el-input",{model:{value:t.obODtj,callback:function(l){e.$set(t,"obODtj",l)},expression:"item.obODtj"}})],1),l("li",[l("el-input",{model:{value:t.obODadd,callback:function(l){e.$set(t,"obODadd",l)},expression:"item.obODadd"}})],1)]),l("ul",[l("li",[e._v("OS")]),l("li",[l("el-input",{model:{value:t.obOSqj,callback:function(l){e.$set(t,"obOSqj",l)},expression:"item.obOSqj"}})],1),l("li",[l("el-input",{model:{value:t.obOSzj,callback:function(l){e.$set(t,"obOSzj",l)},expression:"item.obOSzj"}})],1),l("li",[l("el-input",{model:{value:t.obOSzx,callback:function(l){e.$set(t,"obOSzx",l)},expression:"item.obOSzx"}})],1),l("li",[l("el-input",{model:{value:t.obOStj,callback:function(l){e.$set(t,"obOStj",l)},expression:"item.obOStj"}})],1)]),l("ul",[l("li",[e._v("主导眼")]),l("li",[l("el-input",{model:{value:t.obZDYqj,callback:function(l){e.$set(t,"obZDYqj",l)},expression:"item.obZDYqj"}})],1),l("li",[e._v("双眼平衡")]),l("li",[l("el-input",{model:{value:t.obZDYzx,callback:function(l){e.$set(t,"obZDYzx",l)},expression:"item.obZDYzx"}})],1),l("li",[e._v("瞳距")]),l("li",[l("el-input",{model:{value:t.obZDYadd,callback:function(l){e.$set(t,"obZDYadd",l)},expression:"item.obZDYadd"}})],1)])]),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(l){e.$set(t,"description",l)},expression:"item.description"}})],1),e.$store.state.user.isSuperadmin?l("el-form-item",[l("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(a,1)}}},[e._v("删除")])],1):e._e()],1)})),1)],1),l("el-tab-pane",{attrs:{name:"history",label:"历史信息"}},[l("el-table",{attrs:{border:"",stripe:"",data:e.historyData}},[l("el-table-column",{attrs:{prop:"project_name",label:"项目名称"}}),l("el-table-column",{attrs:{prop:"r_eye",label:"右眼（R）"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.histoyNakedR,callback:function(t){e.$set(e.model,"histoyNakedR",t)},expression:"model.histoyNakedR"}}):e._e(),1===t.$index?l("el-select",{model:{value:e.model.wearGtypeR,callback:function(t){e.$set(e.model,"wearGtypeR",t)},expression:"model.wearGtypeR"}},e._l(e.wearGtypes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),2===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.visionR,callback:function(t){e.$set(e.model,"visionR",t)},expression:"model.visionR"}}):e._e(),3===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.correctVisionR,callback:function(t){e.$set(e.model,"correctVisionR",t)},expression:"model.correctVisionR"}}):e._e(),4===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.eyePressR,callback:function(t){e.$set(e.model,"eyePressR",t)},expression:"model.eyePressR"}}):e._e(),5===t.$index?l("el-select",{model:{value:e.model.eyePositionR,callback:function(t){e.$set(e.model,"eyePositionR",t)},expression:"model.eyePositionR"}},e._l(e.eyePositions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),6===t.$index?l("el-select",{model:{value:e.model.threedEyeR,callback:function(t){e.$set(e.model,"threedEyeR",t)},expression:"model.threedEyeR"}},e._l(e.threedEyes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),7===t.$index?l("el-select",{model:{value:e.model.colorFeelR,callback:function(t){e.$set(e.model,"colorFeelR",t)},expression:"model.colorFeelR"}},e._l(e.colorFeels,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),8===t.$index?l("el-select",{model:{value:e.model.eyeCheckR,callback:function(t){e.$set(e.model,"eyeCheckR",t)},expression:"model.eyeCheckR"}},e._l(e.eyeChecks,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]}}])}),l("el-table-column",{attrs:{prop:"l_eye",label:"左眼（L）"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.histoyNakedL,callback:function(t){e.$set(e.model,"histoyNakedL",t)},expression:"model.histoyNakedL"}}):e._e(),1===t.$index?l("el-select",{model:{value:e.model.wearGtypeL,callback:function(t){e.$set(e.model,"wearGtypeL",t)},expression:"model.wearGtypeL"}},e._l(e.wearGtypes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),2===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.visionL,callback:function(t){e.$set(e.model,"visionL",t)},expression:"model.visionL"}}):e._e(),3===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.correctVisionL,callback:function(t){e.$set(e.model,"correctVisionL",t)},expression:"model.correctVisionL"}}):e._e(),4===t.$index?l("el-input",{attrs:{placeholder:""},model:{value:e.model.eyePressL,callback:function(t){e.$set(e.model,"eyePressL",t)},expression:"model.eyePressL"}}):e._e(),5===t.$index?l("el-select",{model:{value:e.model.eyePositionL,callback:function(t){e.$set(e.model,"eyePositionL",t)},expression:"model.eyePositionL"}},e._l(e.eyePositions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),6===t.$index?l("el-select",{model:{value:e.model.threedEyeL,callback:function(t){e.$set(e.model,"threedEyeL",t)},expression:"model.threedEyeL"}},e._l(e.threedEyes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),7===t.$index?l("el-select",{model:{value:e.model.colorFeelL,callback:function(t){e.$set(e.model,"colorFeelL",t)},expression:"model.colorFeelL"}},e._l(e.colorFeels,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),8===t.$index?l("el-select",{model:{value:e.model.eyeCheckL,callback:function(t){e.$set(e.model,"eyeCheckL",t)},expression:"model.eyeCheckL"}},e._l(e.eyeChecks,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]}}])})],1)],1)],1),l("el-form-item",[l("el-button",{staticStyle:{"margin-top":"2rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},i=[],n=(l("4160"),l("0d03"),l("b0c0"),l("159b"),l("96cf"),l("89ba")),o=l("b279"),s=l("80ae"),r={props:{id:{}},components:{UpLoadimgs:s["a"]},data:function(){return{wearGtypeR:"",wearGtypeL:"",wearGtypes:[{label:"未佩戴",value:"未佩戴"},{label:"框架眼镜",value:"框架眼镜"},{label:"隐形眼镜",value:"隐形眼镜"},{label:"夜戴角膜塑性镜",value:"夜戴角膜塑性镜"},{label:"未知",value:"未知"}],eyePositionR:"",eyePositionL:"",eyePositions:[{label:"正常",value:"正常"},{label:"内斜视",value:"内斜视"},{label:"外斜视",value:"外斜视"},{label:"上下斜视",value:"上下斜视"}],threedEyeR:"",threedEyeL:"",threedEyes:[{label:"无",value:"无"},{label:"有",value:"有"}],colorFeelR:"",colorFeelL:"",colorFeels:[{label:"正常",value:"正常"},{label:"异常",value:"异常"}],eyeCheckR:"",eyeCheckL:"",eyeChecks:[{label:"正常",value:"正常"},{label:"内翻",value:"内翻"},{label:"倒睫",value:"倒睫"}],categories:[{label:"男",value:"男"},{label:"女",value:"女"}],historyData:[{project_name:"裸眼视力",r_eye:"",l_eye:""},{project_name:"是否戴镜",r_eye:"",l_eye:""},{project_name:"戴镜视力",r_eye:"",l_eye:""},{project_name:"矫正视力",r_eye:"",l_eye:""},{project_name:"眼压",r_eye:"",l_eye:""},{project_name:"眼位",r_eye:"",l_eye:""},{project_name:"立体视",r_eye:"",l_eye:""},{project_name:"色觉",r_eye:"",l_eye:""},{project_name:"眼睑",r_eye:"",l_eye:""}],items:[],model:{name:"",avatar:"",skills:[]},createDate:"",pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},watch:{"model.birthday":function(e){this.model.age=Object(o["b"])(e)}},methods:{save:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.model),!t.name&&(t.name=""),!t.phone&&(t.phone=""),!this.id){e.next=10;break}return t.skills.forEach((function(e){e.fakeIconLists&&(e.iconLists=e.fakeIconLists)})),e.next=7,this.$http.put("rest/customers/".concat(this.id),t);case 7:e.sent,e.next=13;break;case 10:return e.next=12,this.$http.post("rest/customers",t);case 12:e.sent;case 13:this.$router.push("/customers/list"),this.$message({type:"success",message:"保存成功"});case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/customers/".concat(this.id));case 2:t=e.sent,this.model=Object.assign({},this.model,t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),afterUpload:function(e){this.$set(this.model,"avatar",e.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,l=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),l||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&l},fetchItems:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){window.vue=this,this.fetchItems(),this.id&&this.fetch()}},c=r,u=(l("2c6ce"),l("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},"44e7":function(e,t,l){var a=l("861d"),i=l("c6b6"),n=l("b622"),o=n("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},b279:function(e,t,l){"use strict";l.d(t,"b",(function(){return a})),l.d(t,"a",(function(){return i}));l("0d03"),l("ac1f"),l("1276");var a=function(e){var t,l=e.split("-"),a=l[0],i=l[1],n=l[2],o=new Date,s=o.getFullYear(),r=o.getMonth()+1,c=o.getDate();if(s==a)t=0;else{var u=s-a;if(u>0)if(r==i){var d=c-n;t=d<0?u-1:u}else{var p=r-i;t=p<0?u-1:u}else t=-1}return t},i=function(e,t,l){var a,i=864e5,o=[];return 1==l?(a=new Date(e.getTime()-t*i),o.push(n(a)),o.push(n(e))):(a=new Date(e.getTime()+t*i),o.push(n(e)),o.push(n(a))),o},n=function(e){var t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return l<10&&(l="0"+l),a<10&&(a="0"+a),t+"-"+l+"-"+a}},e6e1:function(e,t,l){}}]);
//# sourceMappingURL=chunk-04f5ef44.e360bf0d.js.map