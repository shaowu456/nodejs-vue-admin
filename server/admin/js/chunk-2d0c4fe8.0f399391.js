(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4fe8"],{"3cce":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-position":"right",inline:""}},[n("el-row",[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"手机号码"}},[n("el-input",{model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium",type:"primary"},on:{click:e.query}},[e._v("查询")]),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium"},on:{click:e.resetQuery}},[e._v("重置")]),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium"},on:{click:e.filterQuery}},[e._v("过滤")])],1)],1),n("el-table",{attrs:{border:"",stripe:"",data:e.items},on:{"row-click":e.rowClik}},[n("el-table-column",{attrs:{prop:"name",label:"客户名称","min-width":"50"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机号码","min-width":"60"}}),n("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"30"}}),n("el-table-column",{attrs:{prop:"age",label:"年龄","min-width":"50"}}),n("el-table-column",{attrs:{prop:"name","min-width":"50",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{height:"4rem"},attrs:{src:e.row.avatar,alt:""}})]}}])}),n("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"100","show-overflow-tooltip":""}}),e.$store.state.user.isSuperadmin?n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return n.stopPropagation(),e.$router.push("/customers/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}},[e._v("删除")])]}}],null,!1,3294492372)}):e._e()],1),n("el-row",[n("My-Pagination",{ref:"paginations",staticStyle:{float:"right"},attrs:{queryList:e.fetch,total:e.datatotal}})],1)],1)},r=[],i=(n("b0c0"),n("96cf"),n("89ba")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,30,50,100],"page-size":e.pagesize,layout:"total,  prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},s=[],l=(n("a9e3"),{name:"pagination",props:{value:{type:[String,Number],default:""},total:{type:[String,Number],default:60},queryList:{type:Function}},data:function(){return{currentPage:1,pagesize:10}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pagesize=e,console.log("每页 ".concat(e," 条")),this.queryList()},handleCurrentChange:function(e){this.currentPage=e,this.queryList(),console.log("当前页: ".concat(e))}}}),u=l,c=n("2877"),p=Object(c["a"])(u,o,s,!1,null,null,null),m=p.exports,h={components:{MyPagination:m},data:function(){return{model:{name:"",phone:""},datatotal:0,items:[]}},methods:{rowClik:function(e){this.$router.push("/customers/edit/".concat(e._id))},query:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetch();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetQuery:function(){this.model={name:"",phone:""},this.fetch()},fetch:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("findCustomers",{name:this.model.name,phone:this.model.phone,pageIndex:this.$refs.paginations.currentPage,pageSize:this.$refs.paginations.pagesize});case 2:t=e.sent,this.items=t.data.items,this.datatotal=t.data.count;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterQuery:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("findFilterCustomers",{name:this.model.name,phone:this.model.phone,pageIndex:this.$refs.paginations.currentPage,pageSize:this.$refs.paginations.pagesize});case 2:t=e.sent,this.items=t.data.items,this.datatotal=t.data.count;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除客户"'.concat(e.name,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/customers/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},mounted:function(){this.fetch()}},d=h,f=Object(c["a"])(d,a,r,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0c4fe8.0f399391.js.map